(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8701f622"],{"75fc":function(t,e,a){"use strict";a.d(e,"a",(function(){return f}));var i=a("a745"),n=a.n(i),r=a("db2a");function c(t){if(n()(t))return Object(r["a"])(t)}var o=a("774e"),s=a.n(o),d=a("c8bb"),l=a.n(d),h=a("67bb"),p=a.n(h);function u(t){if("undefined"!==typeof p.a&&l()(Object(t)))return s()(t)}var g=a("e630");function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t){return c(t)||u(t)||Object(g["a"])(t)||v()}},d40a:function(t,e,a){"use strict";a.r(e);var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-cell-group",[a("van-cell",{attrs:{title:"登记时间起止",value:t.allDateFormat,"title-style":"flex:0.5",required:""},on:{click:function(e){t.showDatePickerFlag=!0}}})],1),a("div",{staticStyle:{margin:"4px 0px"}},[a("statistic-grid",{attrs:{"grid-data":t.gridData}})],1),a("van-tabs",{on:{rendered:t.render},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tab,(function(e,i){return a("van-tab",{key:i,attrs:{title:e.title}},[a("omsp-panel",[a("div",{ref:e.id,refInFor:!0,style:e.style}),"事件分类"===e.title?a("div",{staticStyle:{margin:"15px"}},[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center",height:"30px"}},[a("div",{staticStyle:{flex:"1","font-size":"15px","font-family":"PingFang-SC-Bold,PingFang-SC","font-weight":"bold",color:"#010025"}},[t._v("\n              事件分类情况\n            ")]),a("div",{staticStyle:{flex:"1","text-align":"right",display:"flex","justify-content":"flex-end","align-items":"center"}},[a("div",{staticStyle:{"font-size":"12px",color:"#A6A8B5"}},[t._v("分类情况")]),a("div",{staticStyle:{"margin-left":"9px",width:"20px",height:"5px","border-radius":"0px 50px 50px 0px","background-image":"linear-gradient(to right, #075AE4 , #249DEB)"}})])]),t._l(e.data,(function(e,i){return a("div",{key:"ic"+i},[a("div",{staticClass:"ellipsis",staticStyle:{"line-height":"16px",margin:"15px 0px 0px 0px","font-size":"15px"}},[t._v("\n              "+t._s(e.name)+"\n            ")]),a("div",{staticStyle:{display:"flex","margin-bottom":"20px"}},[a("div",{staticStyle:{width:"80%"}},[a("div",{style:{width:100*(e.value/(t.categoryMax?t.categoryMax:1)).toFixed(2)+"%","background-color":"red",height:"16px","margin-top":"10px","border-radius":"0px 50px 50px 0px","background-image":"linear-gradient(to right, #075AE4 , #249DEB)"}})]),a("div",{staticStyle:{width:"20%","text-align":"right"}},[t._v("\n                "+t._s(e.value)+"\n              ")])]),a("van-divider",{attrs:{dashed:""}})],1)}))],2):t._e(),"达成情况"===e.title?a("div",{staticStyle:{margin:"15px"}},[a("div",{staticStyle:{width:"100%",display:"flex","align-items":"center",height:"30px"}},[a("div",{staticStyle:{flex:"1","font-size":"15px","font-family":"PingFang-SC-Bold,PingFang-SC","font-weight":"bold",color:"#010025"}},[t._v("\n              达成情况\n            ")]),a("div",{staticStyle:{flex:"1.5","text-align":"right",display:"flex","justify-content":"flex-end","align-items":"center"}},[a("div",{staticStyle:{"font-size":"12px",color:"#A6A8B5","margin-left":"5px"}},[t._v("已完成")]),a("div",{staticStyle:{"margin-left":"9px",width:"20px",height:"5px","border-radius":"0px 50px 50px 0px","background-image":"linear-gradient(to right, #075AE4 , #249DEB)"}}),a("div",{staticStyle:{"font-size":"12px",color:"#A6A8B5","margin-left":"5px"}},[t._v("未完成")]),a("div",{staticStyle:{"margin-left":"9px",width:"20px",height:"5px","border-radius":"0px 50px 50px 0px","background-image":"linear-gradient(to right, #F5AC18 , #F3C871)"}})])]),t._l(t.achieveArr,(function(e,i){return a("div",{key:"iAchieve"+i},[a("div",{staticClass:"ellipsis",staticStyle:{"line-height":"16px",margin:"15px 0px 0px 0px","font-size":"15px"}},[t._v("\n              "+t._s(e.name)+"\n            ")]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"80%"}},[a("div",{style:{width:100*(e.achieveValue/(0===t.achieveMax?1:t.achieveMax)).toFixed(2)+"%","background-color":"red",height:"16px","margin-top":"10px","border-radius":"0px 50px 50px 0px","background-image":"linear-gradient(to right, #075AE4 , #249DEB)"}})]),a("div",{staticStyle:{width:"20%","margin-top":"8px","text-align":"right"}},[t._v("\n                "+t._s(e.achieveValue)+"\n              ")])]),a("div",{staticStyle:{display:"flex","margin-bottom":"20px"}},[a("div",{staticStyle:{width:"80%"}},[a("div",{style:{width:100*(e.noAchieveValue/(0===t.achieveMax?1:t.achieveMax)).toFixed(2)+"%","background-color":"red",height:"16px","margin-top":"10px","border-radius":"0px 50px 50px 0px","background-image":"linear-gradient(to right, #F5AC18 , #F3C871)"}})]),a("div",{staticStyle:{width:"20%","margin-top":"8px","text-align":"right"}},[t._v("\n                "+t._s(e.noAchieveValue)+"\n              ")])]),a("van-divider",{attrs:{dashed:""}})],1)}))],2):t._e()])],1)})),1),a("van-calendar",{attrs:{"safe-area-inset-bottom":"","min-date":t.minDate,"max-date":t.maxDate,"default-date":t.defaultDate,type:"range",color:"#1A88E9"},on:{confirm:t.onConfirm},model:{value:t.showDatePickerFlag,callback:function(e){t.showDatePickerFlag=e},expression:"showDatePickerFlag"}})],1)},r=[],c=(a("8e6e"),a("456d"),a("ac6a"),a("768b")),o=(a("7514"),a("75fc")),s=a("bd86"),d=(a("ef44"),a("473d")),l=(a("2a53"),a("34e9")),h=(a("3ec1"),a("7744")),p=(a("a247"),a("9ed2")),u=(a("8990"),a("5e46")),g=(a("558f"),a("0b33")),v=a("0d35"),f=a("132d"),x=a("f084");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y={name:"StatisticIncident",components:(i={StatisticGrid:x["a"],OmspPanel:v["a"]},Object(s["a"])(i,g["a"].name,g["a"]),Object(s["a"])(i,u["a"].name,u["a"]),Object(s["a"])(i,p["a"].name,p["a"]),Object(s["a"])(i,h["a"].name,h["a"]),Object(s["a"])(i,l["a"].name,l["a"]),Object(s["a"])(i,d["a"].name,d["a"]),i),data:function(){return{biz_code:"SJ",startDate:new Date((new Date).getFullYear(),(new Date).getMonth()-0,1),endDate:new Date,minDate:new Date((new Date).getFullYear()-10,0,1),maxDate:new Date,defaultDate:[new Date((new Date).getFullYear(),(new Date).getMonth()-0,1),new Date],showDatePickerFlag:!1,gridData:{CG:0,TJ:0,DB:0,BJ:0,YB:0},active:0,tab:[{id:"statisticIncidentUrgency",title:"紧急度",style:"width: 100%;height: 500px",dom:"",chart:"",data:[]},{id:"statisticIncidentCategory",title:"事件分类",style:{width:"100%",height:"1px"},dom:"",chart:"",data:[]},{id:"statisticIncidentAchieve",title:"达成情况",style:"width: 100%;height: 1px",dom:"",chart:"",data:{achieved:[],noAchieved:[]}},{id:"statisticIncidentSatisfy",title:"满意度",style:"width: 100%;height: 300px",dom:"",chart:"",data:[]}]}},computed:{categoryMax:function(){var t=Math.max.apply(Math,Object(o["a"])(this.tab[1].data.map((function(t){return t.value}))));return t||0},achieveMax:function(){var t=Math.max.apply(Math,[Math.max.apply(Math,Object(o["a"])(this.tab[2].data.achieved.map((function(t){return t.value})))),Math.max.apply(Math,Object(o["a"])(this.tab[2].data.noAchieved.map((function(t){return t.value}))))]);return t||0},achieveArr:function(){var t=this;return this.tab[2].data.achieved.map((function(t){return{code:t.code,name:t.name,achieveValue:t.value,noAchieveValue:""}})).map((function(e){return e.noAchieveValue=t.tab[2].data.noAchieved.find((function(t){return e.code===t.code})),e.noAchieveValue=e.noAchieveValue?e.noAchieveValue.value:0,e}))},startDateFormat:function(){return"".concat(this.startDate.getFullYear(),"-").concat(this.startDate.getMonth()<9?"0"+(this.startDate.getMonth()+1):this.startDate.getMonth()+1,"-").concat(this.startDate.getDate()<=9?"0"+this.startDate.getDate():this.startDate.getDate())},endDateFormat:function(){return"".concat(this.endDate.getFullYear(),"-").concat(this.endDate.getMonth()<9?"0"+(this.endDate.getMonth()+1):this.endDate.getMonth()+1,"-").concat(this.endDate.getDate()<=9?"0"+this.endDate.getDate():this.endDate.getDate())},allDateFormat:function(){return"".concat(this.startDateFormat," 至 ").concat(this.endDateFormat)}},mounted:function(){this.init()},methods:{onConfirm:function(t){var e=Object(c["a"])(t,2),a=e[0],i=e[1];this.showDatePickerFlag=!1,this.startDate=a,this.endDate=i,this.init()},render:function(){this.setCharts(this.active)},setCharts:function(t){if(this.$refs[this.tab[t].id]){this.tab[t].dom=this.$refs[this.tab[t].id][0],this.tab[t].chart=f["a"].echarts.init(this.tab[t].dom);var e=this.getOption(t);e&&this.tab[t].chart.setOption(e)}},getOption:function(t){return"紧急度"===this.tab[t].title?f["a"].getIncidentUrgencyOption(this.tab[t].data.map((function(t){return t.name})),this.tab[t].data.map((function(t){return t.value}))):"满意度"===this.tab[t].title?f["a"].getIncidentSatisfactionOption(this.tab[t].data.map((function(t){return{name:t.name,value:t.value}}))):null},getData:function(){var t=this,e={startTime:"2020-07-01",endTime:"2020-07-15",biz_code:this.biz_code};this.$OmspRequest.sendRequest({url:"/appStatisticRestService/queryMyTaskCount",data:e}).then((function(e){var a=JSON.parse(e.data.result);t.gridData=b(b({},t.gridData),{CG:a.CG?a.CG:0,TJ:a.TJ?a.TJ:0,DB:a.DB?a.DB:0,BJ:a.BJ?a.BJ:0,YB:a.YB?a.YB:0}),t.tab.forEach((function(e,i){switch(e.title){case"紧急度":e.data=a.urgencyTask;break;case"事件分类":e.data=a.incidentCategory;break;case"达成情况":e.data.achieved=a.achived,e.data.noAchieved=a.noAchived;break;case"满意度":e.data=a.satisfaction;break}t.setCharts(i)}))}))},init:function(){this.getData()}}},D=y,w=a("2877"),S=Object(w["a"])(D,n,r,!1,null,"f1ba843c",null);e["default"]=S.exports}}]);