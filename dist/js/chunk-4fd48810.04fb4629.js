(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fd48810"],{"02f4":function(t,e,n){var a=n("4588"),i=n("be13");t.exports=function(t){return function(e,n){var r,o,s=String(i(e)),c=a(n),u=s.length;return c<0||c>=u?t?"":void 0:(r=s.charCodeAt(c),r<55296||r>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?t?s.charAt(c):r:t?s.slice(c,c+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var a=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?a(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var a=n("cb7c");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,n){"use strict";n("b0c5");var a=n("2aba"),i=n("32e9"),r=n("79e5"),o=n("be13"),s=n("2b4c"),c=n("520a"),u=s("species"),f=!r(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var l=s(t),p=!r(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)}),h=p?!r(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[l](""),!e}):void 0;if(!p||!h||"replace"===t&&!f||"split"===t&&!d){var v=/./[l],m=n(o,l,""[t],function(t,e,n,a,i){return e.exec===c?p&&!i?{done:!0,value:v.call(e,n,a)}:{done:!0,value:t.call(n,e,a)}:{done:!1}}),g=m[0],b=m[1];a(String.prototype,t,g),i(RegExp.prototype,l,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"28a5":function(t,e,n){"use strict";var a=n("aae3"),i=n("cb7c"),r=n("ebd6"),o=n("0390"),s=n("9def"),c=n("5f1b"),u=n("520a"),f=n("79e5"),d=Math.min,l=[].push,p="split",h="length",v="lastIndex",m=4294967295,g=!f(function(){RegExp(m,"y")});n("214f")("split",2,function(t,e,n,f){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!a(t))return n.call(i,t,e);var r,o,s,c=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?m:e>>>0,g=new RegExp(t.source,f+"g");while(r=u.call(g,i)){if(o=g[v],o>d&&(c.push(i.slice(d,r.index)),r[h]>1&&r.index<i[h]&&l.apply(c,r.slice(1)),s=r[0][h],d=o,c[h]>=p))break;g[v]===r.index&&g[v]++}return d===i[h]?!s&&g.test("")||c.push(""):c.push(i.slice(d)),c[h]>p?c.slice(0,p):c}:"0"[p](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,a){var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i,a):b.call(String(i),n,a)},function(t,e){var a=f(b,t,this,e,b!==n);if(a.done)return a.value;var u=i(t),l=String(this),p=r(u,RegExp),h=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),k=new p(g?u:"^(?:"+u.source+")",v),_=void 0===e?m:e>>>0;if(0===_)return[];if(0===l.length)return null===c(k,l)?[l]:[];var x=0,y=0,D=[];while(y<l.length){k.lastIndex=g?y:0;var S,w=c(k,g?l:l.slice(y));if(null===w||(S=d(s(k.lastIndex+(g?0:y)),l.length))===x)y=o(l,y,h);else{if(D.push(l.slice(x,y)),D.length===_)return D;for(var O=1;O<=w.length-1;O++)if(D.push(w[O]),D.length===_)return D;y=x=S}}return D.push(l.slice(x)),D}]})},"520a":function(t,e,n){"use strict";var a=n("0bfb"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,s="lastIndex",c=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[s]||0!==e[s]}(),u=void 0!==/()??/.exec("")[1],f=c||u;f&&(o=function(t){var e,n,o,f,d=this;return u&&(n=new RegExp("^"+d.source+"$(?!\\s)",a.call(d))),c&&(e=d[s]),o=i.call(d,t),c&&o&&(d[s]=d.global?o.index+o[0].length:e),u&&o&&o.length>1&&r.call(o[0],n,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(o[f]=void 0)}),o}),t.exports=o},"5df3":function(t,e,n){"use strict";var a=n("02f4")(!0);n("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=a(e,n),this._i+=t.length,{value:t,done:!1})})},"5f1b":function(t,e,n){"use strict";var a=n("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var r=n.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==a(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},aae3:function(t,e,n){var a=n("d3f4"),i=n("2d95"),r=n("2b4c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},b0c5:function(t,e,n){"use strict";var a=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},b39a:function(t,e,n){var a=n("d3f4");t.exports=function(t,e){if(!a(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},bb80:function(t,e,n){},c26b:function(t,e,n){"use strict";var a=n("86cc").f,i=n("2aeb"),r=n("dcbc"),o=n("9b43"),s=n("f605"),c=n("4a59"),u=n("01f9"),f=n("d53b"),d=n("7a56"),l=n("9e1e"),p=n("67ab").fastKey,h=n("b39a"),v=l?"_s":"size",m=function(t,e){var n,a=p(e);if("F"!==a)return t._i[a];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var f=t(function(t,a){s(t,f,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=a&&c(a,n,t[u],t)});return r(f.prototype,{clear:function(){for(var t=h(this,e),n=t._i,a=t._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete n[a.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=h(this,e),a=m(n,t);if(a){var i=a.n,r=a.p;delete n._i[a.i],a.r=!0,r&&(r.n=i),i&&(i.p=r),n._f==a&&(n._f=i),n._l==a&&(n._l=r),n[v]--}return!!a},forEach:function(t){h(this,e);var n,a=o(t,arguments.length>1?arguments[1]:void 0,3);while(n=n?n.n:this._f){a(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function(t){return!!m(h(this,e),t)}}),l&&a(f.prototype,"size",{get:function(){return h(this,e)[v]}}),f},def:function(t,e,n){var a,i,r=m(t,e);return r?r.v=n:(t._l=r={i:i=p(e,!0),k:e,v:n,p:a=t._l,n:void 0,r:!1},t._f||(t._f=r),a&&(a.n=r),t[v]++,"F"!==i&&(t._i[i]=r)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=h(t,e),this._k=n,this._l=void 0},function(){var t=this,e=t._k,n=t._l;while(n&&n.r)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?f(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),d(e)}}},c622:function(t,e,n){"use strict";var a=n("bb80"),i=n.n(a);i.a},e0b8:function(t,e,n){"use strict";var a=n("7726"),i=n("5ca1"),r=n("2aba"),o=n("dcbc"),s=n("67ab"),c=n("4a59"),u=n("f605"),f=n("d3f4"),d=n("79e5"),l=n("5cc5"),p=n("7f20"),h=n("5dbc");t.exports=function(t,e,n,v,m,g){var b=a[t],k=b,_=m?"set":"add",x=k&&k.prototype,y={},D=function(t){var e=x[t];r(x,t,"delete"==t?function(t){return!(g&&!f(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!f(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof k&&(g||x.forEach&&!d(function(){(new k).entries().next()}))){var S=new k,w=S[_](g?{}:-0,1)!=S,O=d(function(){S.has(1)}),I=l(function(t){new k(t)}),N=!g&&d(function(){var t=new k,e=5;while(e--)t[_](e,e);return!t.has(-0)});I||(k=e(function(e,n){u(e,k,t);var a=h(new b,e,k);return void 0!=n&&c(n,m,a[_],a),a}),k.prototype=x,x.constructor=k),(O||N)&&(D("delete"),D("has"),m&&D("get")),(N||w)&&D(_),g&&x.clear&&delete x.clear}else k=v.getConstructor(e,t,m,_),o(k.prototype,n),s.NEED=!0;return p(k,t),y[t]=k,i(i.G+i.W+i.F*(k!=b),y),g||v.setStrong(k,t,m),k}},e18d:function(t,e,n){"use strict";n.r(e);var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"omsp-body",attrs:{id:"omspHandingTask"}},[n("van-nav-bar",{staticClass:"omsp-nav-bar",attrs:{title:"审批","left-text":"返回","left-arrow":"",fixed:"","z-index":99},on:{"click-left":t.backToIndex}}),n("omsp-task-detail",{ref:"detail",attrs:{"form-data":t.formData,task:t.task,type:1},on:{commit:t.commitOpinions,changeNextNode:t.changeNextNode,derivativeProblem:t.derivativeProblem,derivativeChange:t.derivativeChange}})],1)])},r=[],o=(n("8e6e"),n("456d"),n("28a5"),n("433b"),n("d399")),s=(n("47e2"),n("2241")),c=(n("ac6a"),n("5df3"),n("f400"),n("bd86")),u=(n("da02"),n("6b41")),f=n("15ab"),d=n("03a2");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){Object(c["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var h={name:"HandingTask",components:(a={},Object(c["a"])(a,u["a"].name,u["a"]),Object(c["a"])(a,"omsp-task-detail",d["a"]),a),props:{task:Object},data:function(){return{axiosset:{timeout:5e3,headers:{token:""}},nodeNum:1,opinions:"",opinionsTextarea:{maxHeight:150,minHeight:50},formData:{bsid:"",description:"",occur_date:"",urgency:"",biz_code:"",taskName:"",approveOpinion:"",isPass:"1",stepList:[],nextNode:"",nextNodeList:[],nodeUserList:[],nodeUser:"",operation:"",target_sys:[],team_id:[],title:"",actionIdArray:[],delUser:"",delUserList:[],delUserListSelector:[],satisfaction:"",satisfactionList:[],satisfactionListSelector:[],derivativeProblem:!1,derivativeChange:!1},commitForm:new Map}},watch:{"formData.ISPASS":function(t,e){JSON.stringify(e),this.formData.showISPASS&&"1"===t?this.formData.showDelUser=!0:this.formData.showDelUser=!1}},mounted:function(){this.init()},methods:{backToIndex:function(){this.$router.slid="right",this.$router.back()},commitOpinions:function(t){var e=this;s["a"].confirm({message:"确认提交审批吗？"}).then(function(){o["a"].loading({mask:!0,forbidClick:!0,duration:0,message:"请稍后..."}),setTimeout(function(){var n=p({processInstanceId:e.task.processInstanceId,wiatmenuid:"",bsid:e.task.bsid,exids:"",biz_code:e.task.biz_code,taskname:e.task.taskName,isEdit_:"",cumulativetime:"",ISPASS:e.formData.ISPASS||"1",taskId:e.task.taskId,node_id:e.task.flowNodeId},t);e.$OmspRequest.sendRequest({url:"/appTaskRestService/dealTask",data:n}).then(function(t){o["a"].clear();var n=JSON.parse(t.data.resultMessage);n.flag?(o["a"].success("提交成功"),e.$store.commit("page/removeCachePageName","OmspIndex"),setTimeout(function(){e.$router.push({path:"index"})})):Object(s["a"])({message:"提交失败"})}).catch(function(t){JSON.stringify(t),console.log(t),o["a"].fail("办理失败")}).finally(function(){})},0)}).catch(function(){})},receiveTask:function(){var t=this;o["a"].loading({mask:!0,forbidClick:!0,duration:0,message:"领取任务"});var e={nodestate:this.task.nodestate,creater:this.task.creater,bsid:this.task.bsid,biz_code:this.task.biz_code,nodeid:this.task.flowNodeId,proc_inst_id_:this.task.processInstanceId,nodename:this.task.taskName,taskid:this.task.taskId};setTimeout(function(){t.$OmspRequest.sendRequest({url:"/appTaskRestService/receiveTask",data:e}).then(function(){o["a"].success("领取成功"),t.$store.commit("page/removeCachePageName","OmspIndex"),t.getBaseData()}).catch(function(t){JSON.stringify(t),o["a"].fail("领取任务失败，请重新登录")}).finally(function(){})},0)},getBaseData:function(){var t=this;o["a"].loading({mask:!0,forbidClick:!0,duration:0,message:"加载中..."}),setTimeout(function(){t.$OmspRequest.sendRequest({url:"/appTaskRestService/toDeal",data:t.task}).then(function(e){var n=e.data.formData;t.formData.bsid=t.task.bsid,t.formData.biz_code=t.task.biz_code,t.formData.taskName=t.task.taskName,t.formData.title=t.task.title,t.formData.description="BG"===t.formData.biz_code?n.change_desc:"SJ"===t.formData.biz_code?n.ck_description:n.description,n.occur_date&&(t.formData.occur_date=n.occur_date),n.create_date&&(t.formData.occur_date=n.create_date),t.formData.urgency=n.urgency,t.formData.target_sys=n.target_sys,t.formData.team_id=n.team_id,t.formData.nextNodeList=e.data.nextNode,t.formData.nextNode="",t.formData.delUserList=JSON.parse(e.data.delUserList),t.formData.delUserList&&(t.formData.delUserListSelector=t.formData.delUserList.map(function(t){return t.name})),t.formData.showDelUser="任务分配"===t.formData.taskName,t.formData.satisfactionList=e.data.satisfactionType,t.formData.satisfactionList&&(t.formData.satisfactionListSelector=t.formData.satisfactionList.map(function(t){return t.name}));var a=JSON.parse(e.data.checkAction);t.formData.actionIdArray=a.actionids.split(","),-1===a.actionids.indexOf("ISPASS")&&-1===a.actionids.indexOf("ISRELEASE")&&2===e.data.nextNode.length&&t.formData.actionIdArray.push("ISPASS"),o["a"].success("加载成功")}).catch(function(t){JSON.stringify(t),console.log(t),o["a"].fail("加载基础数据失败")}).finally(function(){})},0)},changeNextNode:function(t){var e=this,n=this.formData.nextNodeList[t].id;this.$OmspRequest.sendRequest({url:"/appTaskRestService/getNodeUser",data:{nodeid:n,processInstanceId:this.task.processInstanceId,bsid:this.task.bsid,biz_code:this.formData.biz_code}}).then(function(t){t.data.nodeUserList?e.formData.nodeUserList=t.data.nodeUserList:(e.formData.nodeUserList=[],e.formData.nodeUser="")}).catch(function(t){console.log(t),JSON.stringify(t)}).finally(function(){})},derivativeProblem:function(){},derivativeChange:function(){},init:function(){this.axiosset.headers.token=f["a"].get_omsp_app_token(),"0"===this.task.nodestate?this.receiveTask():this.getBaseData()}}},v=h,m=(n("c622"),n("2877")),g=Object(m["a"])(v,i,r,!1,null,null,null);e["default"]=g.exports},f400:function(t,e,n){"use strict";var a=n("c26b"),i=n("b39a"),r="Map";t.exports=n("e0b8")(r,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=a.getEntry(i(this,r),t);return e&&e.v},set:function(t,e){return a.def(i(this,r),0===t?0:t,e)}},a,!0)}}]);