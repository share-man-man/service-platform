(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6ebdeec"],{"162c":function(e,t,a){},"21ab":function(e,t,a){"use strict";var i=a("c31d"),n=a("d282"),r=a("ea8e"),o=a("b1d2"),c=a("48f4"),s=a("9884"),u=a("6f2f"),l=a("ad06"),g=Object(n["a"])("grid-item"),d=g[0],m=g[1];t["a"]=d({mixins:[Object(s["a"])("vanGrid")],props:Object(i["a"])({},c["c"],{dot:Boolean,text:String,icon:String,info:[Number,String]}),computed:{style:function(){var e=this.parent,t=e.square,a=e.gutter,i=e.columnNum,n=100/i+"%",o={flexBasis:n};if(t)o.paddingTop=n;else if(a){var c=Object(r["a"])(a);o.paddingRight=c,this.index>=i&&(o.marginTop=c)}return o},contentStyle:function(){var e=this.parent,t=e.square,a=e.gutter;if(t&&a){var i=Object(r["a"])(a);return{right:i,bottom:i,height:"auto"}}}},methods:{onClick:function(e){this.$emit("click",e),Object(c["b"])(this.$router,this)},genIcon:function(){var e=this.$createElement,t=this.slots("icon");return t?e("div",{class:m("icon-wrapper")},[t,e(u["a"],{attrs:{dot:this.dot,info:this.info}})]):this.icon?e(l["a"],{attrs:{name:this.icon,dot:this.dot,info:this.info,size:this.parent.iconSize},class:m("icon")}):void 0},getText:function(){var e=this.$createElement,t=this.slots("text");return t||(this.text?e("span",{class:m("text")},[this.text]):void 0)},genContent:function(){var e=this.slots();return e||[this.genIcon(),this.getText()]}},render:function(){var e,t=arguments[0],a=this.parent,i=a.center,n=a.border,r=a.square,c=a.gutter,s=a.clickable;return t("div",{class:[m({square:r})],style:this.style},[t("div",{style:this.contentStyle,attrs:{role:s?"button":null,tabindex:s?0:null},class:[m("content",{center:i,square:r,clickable:s,surround:n&&c}),(e={},e[o["b"]]=n,e)],on:{click:this.onClick}},[this.genContent()])])}})},2830:function(e,t,a){"use strict";var i=a("d282"),n=a("ea8e"),r=a("b1d2"),o=a("9884"),c=Object(i["a"])("grid"),s=c[0],u=c[1];t["a"]=s({mixins:[Object(o["b"])("vanGrid")],props:{square:Boolean,gutter:[Number,String],iconSize:[Number,String],clickable:Boolean,columnNum:{type:[Number,String],default:4},center:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},computed:{style:function(){var e=this.gutter;if(e)return{paddingLeft:Object(n["a"])(e)}}},render:function(){var e,t=arguments[0];return t("div",{style:this.style,class:[u(),(e={},e[r["f"]]=this.border&&!this.gutter,e)]},[this.slots()])}})},"35bb":function(e,t,a){},4072:function(e,t,a){"use strict";a("3cd0"),a("162c")},"4c4b":function(e,t,a){"use strict";var i=a("35bb"),n=a.n(i);n.a},"4cbe":function(e,t,a){"use strict";a.r(t);var i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"omsp-eventregist",attrs:{id:"omspeventregist"}},[a("van-nav-bar",{staticClass:"omsp-nav-bar",attrs:{title:"问题登记","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":e.backToIndex}}),a("div",{staticClass:"omsp-eventregist-body"},[a("van-tabs",{attrs:{"lazy-render":!1},model:{value:e.tabNum,callback:function(t){e.tabNum=t},expression:"tabNum"}},[a("van-tab",{attrs:{title:"基本信息"}},[a("van-cell-group",[a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"问题标题",placeholder:"请输入",clickable:""},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"提出时间",placeholder:"点击选择时间",clickable:"",readonly:""},on:{click:function(t){e.showOccurDatePickerFlag=!0}},model:{value:e.registeDate,callback:function(t){e.registeDate=t},expression:"registeDate"}}),a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"提出人",placeholder:"请输入",clickable:"",readonly:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"提出人电话",placeholder:"请输入",clickable:"",readonly:""},on:{click:function(t){e.showCreatUserTelKeyboard=!0}},model:{value:e.creatUserTel,callback:function(t){e.creatUserTel=t},expression:"creatUserTel"}}),a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"问题分类",placeholder:"点击选择问题类型",clickable:"","right-icon":"arrow",readonly:""},on:{click:function(t){e.showCategorySelectorFlag=!0}},model:{value:e.category.name,callback:function(t){e.$set(e.category,"name",t)},expression:"category.name"}}),a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"紧急度",placeholder:"点击选择紧急度",clickable:"","right-icon":"arrow",readonly:""},on:{click:function(t){e.showUrgencySelectorFlag=!0}},model:{value:e.urgency.name,callback:function(t){e.$set(e.urgency,"name",t)},expression:"urgency.name"}}),a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"所属部门",placeholder:"点击选择所属部门","default-index":"0",clickable:"","right-icon":"arrow",readonly:""},on:{click:function(t){e.showOriginSelectorFlag=!0}},model:{value:e.origin.name,callback:function(t){e.$set(e.origin,"name",t)},expression:"origin.name"}}),a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"所属团队",placeholder:"点击选择所属团队",clickable:"","right-icon":"arrow",readonly:""},on:{click:function(t){e.showTeamSelectorFlag=!0}},model:{value:e.team.name,callback:function(t){e.$set(e.team,"name",t)},expression:"team.name"}}),a("van-field",{attrs:{"input-align":"right",required:"",clearable:"",label:"所属系统",placeholder:"点击选择所属系统",clickable:"","right-icon":"arrow",readonly:""},on:{click:function(t){e.showTargetSysSelectorFlag=!0}},model:{value:e.targetSys.name,callback:function(t){e.$set(e.targetSys,"name",t)},expression:"targetSys.name"}}),a("van-field",{attrs:{"input-align":"right",clearable:"",label:"发生频率",placeholder:"请输入发生频率",clickable:"","right-icon":"arrow",readonly:""},on:{click:function(t){e.showOccurFrequencySelectorFlag=!0}},model:{value:e.occurFrequency.name,callback:function(t){e.$set(e.occurFrequency,"name",t)},expression:"occurFrequency.name"}}),a("van-field",{attrs:{"input-align":"right",clearable:"",label:"再次发生风险",placeholder:"请输入",clickable:""},model:{value:e.againOccurRisk,callback:function(t){e.againOccurRisk=t},expression:"againOccurRisk"}})],1),a("van-cell-group",[a("van-panel",{attrs:{title:"问题描述",icon:"comment"}},[a("omsp-editor",{model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}})],1)],1)],1),a("van-tab",{attrs:{title:"附件管理"}},[a("task-file",{attrs:{bsid:e.bsid||e.$route.params.bsid,biz_code:e.biz_code}})],1)],1)],1),a("div",{staticClass:"omsp-eventregist-foot"},[a("div",{staticClass:"omsp-eventregist-foot-grid"},[a("div",{staticClass:"omsp-eventregist-foot-grid-item",staticStyle:{"background-color":"#1A88E9"}},[a("div",{staticClass:"omsp-eventregist-foot-grid-item-center",on:{click:function(t){return e.save("commit")}}},[a("span",{staticClass:"omsp-eventregist-foot-grid-item-center-text"},[e._v("提交")])])]),a("div",{staticClass:"omsp-eventregist-foot-grid-item",staticStyle:{"background-color":"#BBBCC2"}},[a("div",{staticClass:"omsp-eventregist-foot-grid-item-center",on:{click:function(t){return e.save("draft")}}},[a("span",{staticClass:"omsp-eventregist-foot-grid-item-center-text"},[e._v("存为草稿")])])])])]),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showOccurDatePickerFlag,callback:function(t){e.showOccurDatePickerFlag=t},expression:"showOccurDatePickerFlag"}},[a("van-datetime-picker",{attrs:{type:"datetime",title:"提出时间","min-date":e.minOccurDate,"max-date":e.maxOccurDate},on:{confirm:e.confirmOccurDate,cancel:function(t){e.showOccurDatePickerFlag=!1}},model:{value:e.pickingOccurDate,callback:function(t){e.pickingOccurDate=t},expression:"pickingOccurDate"}})],1),a("van-number-keyboard",{attrs:{show:e.showCreatUserTelKeyboard,theme:"custom","extra-key":".","close-button-text":"完成"},on:{blur:function(t){e.showCreatUserTelKeyboard=!1}},model:{value:e.creatUserTel,callback:function(t){e.creatUserTel=t},expression:"creatUserTel"}}),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showUrgencySelectorFlag,callback:function(t){e.showUrgencySelectorFlag=t},expression:"showUrgencySelectorFlag"}},[a("van-picker",{attrs:{loading:e.urgencyLoading,columns:e.urgencySelector,"show-toolbar":"",title:"紧急度"},on:{cancel:function(t){e.showUrgencySelectorFlag=!1},confirm:e.confirmUrgency}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showCategorySelectorFlag,callback:function(t){e.showCategorySelectorFlag=t},expression:"showCategorySelectorFlag"}},[a("van-picker",{attrs:{loading:e.categoryLoading,columns:e.categorySelector,"show-toolbar":"",title:"问题分类"},on:{cancel:function(t){e.showCategorySelectorFlag=!1},confirm:e.confirmCategory}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showOccurFrequencySelectorFlag,callback:function(t){e.showOccurFrequencySelectorFlag=t},expression:"showOccurFrequencySelectorFlag"}},[a("van-picker",{attrs:{loading:e.occurFrequencyLoading,columns:e.occurFrequencySelector,"show-toolbar":"",title:"发生频率"},on:{cancel:function(t){e.showOccurFrequencySelectorFlag=!1},confirm:e.confirmOccurFrequency}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showOriginSelectorFlag,callback:function(t){e.showOriginSelectorFlag=t},expression:"showOriginSelectorFlag"}},[a("van-picker",{attrs:{loading:e.originLoading,columns:e.originSelector,"show-toolbar":"",title:"所属部门"},on:{cancel:function(t){e.showOriginSelectorFlag=!1},confirm:e.confirmOrigin}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showTeamSelectorFlag,callback:function(t){e.showTeamSelectorFlag=t},expression:"showTeamSelectorFlag"}},[a("van-picker",{attrs:{loading:e.teamLoading,columns:e.teamSelector,"show-toolbar":"",title:"所属团队"},on:{cancel:function(t){e.showTeamSelectorFlag=!1},confirm:e.confirmTeam}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showTargetSysSelectorFlag,callback:function(t){e.showTargetSysSelectorFlag=t},expression:"showTargetSysSelectorFlag"}},[a("van-picker",{attrs:{loading:e.targetSysLoading,columns:e.targetSysSelector,"show-toolbar":"",title:"所属系统"},on:{cancel:function(t){e.showTargetSysSelectorFlag=!1},confirm:e.confirmTargetSys}})],1)],1)])},r=[],o=(a("7514"),a("47e2"),a("2241")),c=(a("6762"),a("bd86")),s=(a("8990"),a("5e46")),u=(a("558f"),a("0b33")),l=(a("d707"),a("8f80")),g=(a("a035"),a("21ab")),d=(a("4072"),a("2830")),m=(a("2a53"),a("34e9")),h=(a("3ec1"),a("7744")),f=(a("8e11"),a("f253")),p=(a("81a6"),a("7bd9")),b=(a("c625"),a("b650")),y=(a("87d0"),a("e41f")),v=(a("578d"),a("ee83")),S=(a("aa1f"),a("ea47")),O=(a("9eda"),a("565f")),k=(a("433b"),a("d399")),x=(a("da02"),a("6b41")),_=a("0ed4"),w=a("a156"),F={name:"OmspAddProblem",components:(i={},Object(c["a"])(i,x["a"].name,x["a"]),Object(c["a"])(i,k["a"].name,k["a"]),Object(c["a"])(i,O["a"].name,O["a"]),Object(c["a"])(i,S["a"].name,S["a"]),Object(c["a"])(i,v["a"].name,v["a"]),Object(c["a"])(i,y["a"].name,y["a"]),Object(c["a"])(i,b["a"].name,b["a"]),Object(c["a"])(i,p["a"].name,p["a"]),Object(c["a"])(i,f["a"].name,f["a"]),Object(c["a"])(i,h["a"].name,h["a"]),Object(c["a"])(i,m["a"].name,m["a"]),Object(c["a"])(i,d["a"].name,d["a"]),Object(c["a"])(i,g["a"].name,g["a"]),Object(c["a"])(i,l["a"].name,l["a"]),Object(c["a"])(i,u["a"].name,u["a"]),Object(c["a"])(i,s["a"].name,s["a"]),Object(c["a"])(i,"TaskFile",_["a"]),Object(c["a"])(i,"OmspEditor",w["a"]),i),data:function(){return{problemData:{},biz_code:"WT",tabNum:0,incident_id:"",is_upgrade_problem:"",bsid:"",title:"",userid:"",username:"",showOccurDatePickerFlag:!1,minOccurDate:new Date(2e3,0,1),maxOccurDate:new Date,pickingOccurDate:new Date,registeDate:"",showCreatUserTelKeyboard:!1,creatUserTel:"",urgency:{},showUrgencySelectorFlag:!1,urgencyLoading:!0,urgencySelector:[],urgencyList:[],origin:"",showOriginSelectorFlag:!1,originLoading:!0,originSelector:[],originList:[],team:{},showTeamSelectorFlag:!1,teamLoading:!0,teamSelector:[],teamList:[],showTargetSysSelectorFlag:!1,targetSysSelector:[],targetSys:{},targetSysLoading:!0,targetSysList:[],category:{},showCategorySelectorFlag:!1,categoryLoading:!0,categorySelector:[],categoryList:[],occurFrequency:{},showOccurFrequencySelectorFlag:!1,occurFrequencyLoading:!0,occurFrequencySelector:[],occurFrequencyList:[],againOccurRisk:"",editorData:"",source:{},sourceList:[],incidentLevel:"",showIncidentLevelSelectorFlag:!1,incidentLevelLoading:!0,incidentLevelSelector:[],incidentLevelList:[],sj_urgency:{},imgPreviewList:[],imgFileList:[]}},computed:{maxPlanFinishDate:function(){var e=new Date;return e.setMonth(e.getMonth()+6),e}},mounted:function(){this.confirmOccurDate(new Date),this.getBasicInfo()},methods:{backToIndex:function(){this.$router.slid="right",this.$router.back()},confirmOccurDate:function(e){var t=e.getMonth()+1;this.registeDate=e.getFullYear()+"-"+(t>9?t:"0"+t)+"-"+(e.getDate()>9?e.getDate():"0"+e.getDate())+" "+(e.getHours()>9?e.getHours():"0"+e.getHours())+":"+(e.getMinutes()>9?e.getMinutes():"0"+e.getMinutes())+":00",this.showOccurDatePickerFlag=!1},confirmUrgency:function(e,t){this.urgency=this.urgencyList[t],this.showUrgencySelectorFlag=!1},confirmCategory:function(e,t){this.category=this.categoryList[t],this.showCategorySelectorFlag=!1},confirmOccurFrequency:function(e,t){this.occurFrequency=this.occurFrequencyList[t],this.showOccurFrequencySelectorFlag=!1},confirmOrigin:function(e,t){this.origin=this.originList[t],this.showOriginSelectorFlag=!1},confirmTeam:function(e,t){var a=this;this.team=this.teamList[t],this.showTeamSelectorFlag=!1,this.$OmspRequest.sendRequest({url:"/appTaskRestService/getTargetSys",data:{team_id:this.team.id}}).then(function(e){a.targetSysList=e.data.targetSysList,a.targetSysSelector=[];for(var t=0;t<a.targetSysList.length;t++)a.targetSysSelector.push(a.targetSysList[t].name);1===a.targetSysList.length&&(a.targetSys=a.targetSysList[0]),a.targetSysLoading=!1,setTimeout(function(){if(a.targetSysList)for(var e=0;e<a.targetSysList.length;e++)a.problemData.target_sys===a.targetSysList[e].id&&(a.targetSys=a.targetSysList[e])},0)}).catch(function(e){JSON.stringify(e),Object(k["a"])("加载失败，请重新登录")}).finally(function(){})},confirmTargetSys:function(e,t){"number"===typeof t&&(this.targetSys=this.targetSysList[t]),this.showTargetSysSelectorFlag=!1},beforeReadImg:function(e){var t=e.type,a=["image/png","image/jpeg"];return!!a.includes(t)||(k["a"].fail("请上传:png、jpeg的图片格式"),!1)},afterReadImg:function(e){return e},save:function(e){var t=this,a=this.checkForm();a.flag?o["a"].confirm({title:"通知",message:"确定这项操作吗?"}).then(function(){k["a"].loading({mask:!0,forbidClick:!0,duration:0,message:"请稍后..."});var a=t.getFormData();setTimeout(function(){t.$OmspRequest.sendRequest({url:"/appProblemRestService/saveProblem",data:a}).then(function(a){k["a"].clear(),t.bsid=a.data.id,t.$nextTick(function(){t.$store.commit("page/removeCachePageName","OmspIndex"),"draft"===e?t.keepEdit():"commit"===e&&t.submit()})}).catch(function(e){JSON.stringify(e),k["a"].fail("暂存失败")}).finally(function(){})},0)}).catch(function(){}):k["a"].fail(a.msg)},keepEdit:function(){var e=this;o["a"].confirm({title:"暂存成功",message:"是否继续修改？"}).then(function(){}).catch(function(){setTimeout(function(){e.$router.push({path:"index"})})})},submit:function(){var e=this;k["a"].loading({mask:!0,forbidClick:!0,duration:0,message:"提交中，请稍后..."});var t=this.getFormData();setTimeout(function(){e.$OmspRequest.sendRequest({url:"/appProblemRestService/submitProblem",data:{id:t.id}}).then(function(t){k["a"].clear(),JSON.stringify(t),o["a"].alert({message:"提交成功，即将返回主页"}).then(function(){e.$store.commit("page/removeCachePageName","OmspIndex"),setTimeout(function(){e.$router.push({path:"index"})})})}).catch(function(e){JSON.stringify(e),console.log(e),k["a"].fail("提交失败")}).finally(function(){})},0)},getFormData:function(){var e={bg_change_type:"",urgency_desc:this.urgency.name,sj_id:"",bg_orgname:"",is_view:"",sj_target_sys_desc:"",bg_applicant_phone:"",team_id:this.team.id,source:this.source.id,proc_inst_id_:"",registe_date:this.registeDate,incident_id:"",sj_category_desc:"",sj_applicant_phone:"",bg_target_sys_desc:"",category_desc:this.category.name,target_sys:this.targetSys.id,sj_orgname:"",bg_team_id_desc:"",id:this.bsid,again_occur_risk:this.againOccurRisk,bg_urgency:"",bg_urgency_desc:"",bg_team_id:"",sj_incident_level_desc:this.incidentLevel.name,orgid:this.origin.id,bg_category_desc:"",bg_change_plan:"",org_id:this.origin.id,sj_applicant:"",bg_category:"",bg_effect_scope:"",occur_frequency_desc:this.occurFrequency.name,bg_applicant:"",bg_id:"",description:this.editorData,sj_target_sys:"",title:this.title,sj_team_id:"",is_base:"1",urgency:this.urgency.id,is_draft:"1",source_desc:this.source.name,sj_incident_level:this.incidentLevel.id,bg_change_type_desc:"",bg_title:"",sj_title:"",sj_occur_date:"",bg_target_sys:"",sj_urgency:this.sj_urgency.id,sj_urgency_desc:this.sj_urgency.name,pos_orgname:this.origin.orgname,sj_category:"",team_id_desc:this.team.name,menuid:"",occur_frequency:this.occurFrequency.id,sj_team_id_desc:"",registe_phone:this.creatUserTel,category:this.category.id,target_sys_desc:this.targetSys.name,register:this.username};return e},getBasicInfo:function(){var e=this;Object(k["a"])({type:"loading",overlay:!0,message:"加载中...",duration:0,forbidClick:!0}),setTimeout(function(){e.$OmspRequest.sendRequest({url:"/appProblemRestService/getProblemBasicInfo",data:{}}).then(function(t){k["a"].clear(),e.username=t.data.username,e.userid=t.data.userid,e.urgencyList=t.data.urgencyList,e.urgencySelector=[];for(var a=0;a<e.urgencyList.length;a++)e.urgencySelector.push(e.urgencyList[a].name);e.urgencyLoading=!1,e.categoryList=t.data.categoryList,e.categorySelector=[];for(var i=0;i<e.categoryList.length;i++)e.categorySelector.push(e.categoryList[i].name);e.categoryLoading=!1,e.occurFrequencyList=t.data.occurFrequencyList,e.occurFrequencySelector=[];for(var n=0;n<e.occurFrequencyList.length;n++)e.occurFrequencySelector.push(e.occurFrequencyList[n].name);e.occurFrequencyLoading=!1,e.teamList=t.data.teamList,e.teamSelector=[];for(var r=0;r<e.teamList.length;r++)e.teamSelector.push(e.teamList[r].name);e.teamLoading=!1,1===e.teamList.length&&(e.team=e.teamList[0],e.confirmTeam("",0)),e.sourceList=t.data.problemSource,e.source=e.sourceList.find(function(e){return"02"===e.id}),e.incidentLevelList=t.data.incidentLevelList,e.incidentLevel=e.incidentLevelList.find(function(e){return"03"===e.id}),e.originList=t.data.originList,e.originSelector=[];for(var o=0;o<e.originList.length;o++)e.originSelector.push(e.originList[o].orgname);if(e.originLoading=!1,1===e.originList.length&&(e.origin=e.originList[0]),e.sj_urgency=e.urgencyList.find(function(e){return"03"===e.id}),e.$route.query.bsid&&"edit"===e.$route.query.editType?e.getInfoData(e.$route.query.bsid):"derivative"===e.$route.query.editType&&e.getIncidentFormData(e.$route.query.bsid),e.$route.query.incident_id){var c=e.$route.query;for(var s in c)"description"===s?e.editorData=c[s]:e[s]=c[s]}}).catch(function(e){JSON.stringify(e),Object(k["a"])("加载基础数据失败")}).finally(function(){})},0)},getIncidentFormData:function(e){var t=this;setTimeout(function(){t.$OmspRequest.sendRequest({url:"/appTaskRestService/getIncident",data:{id:e}}).then(function(e){}).catch(function(e){JSON.stringify(e),Object(k["a"])("加载表单数据失败")}).finally(function(){})},0)},checkForm:function(){var e={flag:!1,msg:""};return""===this.title?e.msg="请输入标题":""===this.registeDate?e.msg="请输入提出时间":""===this.username?e.msg="没有提出人":""===this.creatUserTel?e.msg="请输入提出人电话":""===this.urgency?e.msg="请选择紧急度":""===this.category?e.msg="请选择问题分类":""===this.team?e.msg="请选择所属团队":""===this.targetSys?e.msg="请选择所属系统":""===this.editorData?e.msg="请输入问题描述":e.flag=!0,e},getInfoData:function(e){var t=this;setTimeout(function(){t.$OmspRequest.sendRequest({url:"/appProblemRestService/getProblem",data:{id:e}}).then(function(e){t.problemData=JSON.parse(e.data.result),t.bsid=t.problemData.id,t.incident_id=t.problemData.incident_id,t.is_upgrade_problem=t.problemData.is_upgrade_problem,t.title=t.problemData.title,t.pickingOccurDate=t.problemData.registe_date,t.registeDate=t.problemData.registe_date,t.creatUserTel=t.problemData.registe_phone;for(var a=0;a<t.categoryList.length;a++)t.problemData.category===t.categoryList[a].id&&(t.category=t.categoryList[a]);for(var i=0;i<t.urgencyList.length;i++)t.problemData.urgency===t.urgencyList[i].id&&(t.urgency=t.urgencyList[i]);for(var n=0;n<t.occurFrequencyList.length;n++)t.problemData.occur_frequency===t.occurFrequencyList[n].id&&(t.occurFrequency=t.occurFrequencyList[n]);for(var r=0;r<t.teamList.length;r++)t.problemData.team_id===t.teamList[r].id&&t.confirmTeam("",r);t.againOccurRisk=t.problemData.again_occur_risk,t.editorData=t.problemData.description}).catch(function(e){JSON.stringify(e),Object(k["a"])("加载失败，请重新登录")}).finally(function(){})},0)}}},D=F,L=(a("4c4b"),a("2877")),j=Object(L["a"])(D,n,r,!1,null,"b58ee198",null);t["default"]=j.exports},"578d":function(e,t,a){"use strict";a("3cd0"),a("25bb"),a("f8c2")},6762:function(e,t,a){"use strict";var i=a("5ca1"),n=a("c366")(!0);i(i.P,"Array",{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"7bd9":function(e,t,a){"use strict";var i=a("d282"),n=a("1325"),r=a("b1d2"),o=a("5fbe"),c=a("3875"),s=Object(i["a"])("key"),u=s[0],l=s[1],g=u({mixins:[c["a"]],props:{type:String,text:[Number,String],theme:{type:Array,default:function(){return[]}}},data:function(){return{active:!1}},computed:{className:function(){var e=this.theme.slice(0);return this.active&&e.push("active"),this.type&&e.push(this.type),l(e)}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{onTouchStart:function(e){e.stopPropagation(),this.touchStart(e),this.active=!0},onTouchMove:function(e){this.touchMove(e),this.direction&&(this.active=!1)},onTouchEnd:function(){this.active&&(this.active=!1,this.$emit("press",this.text,this.type))}},render:function(){var e=arguments[0];return e("i",{attrs:{role:"button",tabindex:"0"},class:[r["b"],this.className]},[this.slots("default")||this.text])}}),d=Object(i["a"])("number-keyboard"),m=d[0],h=d[1],f=d[2],p=["blue","big"],b=["delete","big","gray"];t["a"]=m({mixins:[Object(o["a"])(function(e){this.hideOnClickOutside&&e(document.body,"touchstart",this.onBlur)})],model:{event:"update:value"},props:{show:Boolean,title:String,zIndex:[Number,String],closeButtonText:String,deleteButtonText:String,theme:{type:String,default:"default"},value:{type:String,default:""},extraKey:{type:String,default:""},maxlength:{type:[Number,String],default:Number.MAX_VALUE},transition:{type:Boolean,default:!0},showDeleteKey:{type:Boolean,default:!0},hideOnClickOutside:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0}},watch:{show:function(e){this.transition||this.$emit(e?"show":"hide")}},computed:{keys:function(){for(var e=[],t=1;t<=9;t++)e.push({text:t});switch(this.theme){case"default":e.push({text:this.extraKey,theme:["gray"],type:"extra"},{text:0},{text:this.deleteText,theme:["gray"],type:"delete"});break;case"custom":e.push({text:0,theme:["middle"]},{text:this.extraKey,type:"extra"});break}return e},deleteText:function(){return this.deleteButtonText||f("delete")}},methods:{onBlur:function(){this.show&&this.$emit("blur")},onClose:function(){this.$emit("close"),this.onBlur()},onAnimationEnd:function(){this.$emit(this.show?"show":"hide")},onPress:function(e,t){if(""!==e){var a=this.value;"delete"===t?(this.$emit("delete"),this.$emit("update:value",a.slice(0,a.length-1))):"close"===t?this.onClose():a.length<this.maxlength&&(this.$emit("input",e),this.$emit("update:value",a+e))}},genTitle:function(){var e=this.$createElement,t=this.title,a=this.theme,i=this.closeButtonText,n=this.slots("title-left"),o=i&&"default"===a,c=t||o||n;if(c)return e("div",{class:[h("title"),r["f"]]},[n&&e("span",{class:h("title-left")},[n]),t&&e("span",[t]),o&&e("span",{attrs:{role:"button",tabindex:"0"},class:h("close"),on:{click:this.onClose}},[i])])},genKeys:function(){var e=this,t=this.$createElement;return this.keys.map(function(a){return t(g,{key:a.text,attrs:{text:a.text,type:a.type,theme:a.theme},on:{press:e.onPress}},["delete"===a.type&&e.slots("delete"),"extra"===a.type&&e.slots("extra-key")])})},genSidebar:function(){var e=this.$createElement;if("custom"===this.theme)return e("div",{class:h("sidebar")},[e(g,{attrs:{text:this.deleteText,type:"delete",theme:b},on:{press:this.onPress}},[this.slots("delete")]),e(g,{attrs:{text:this.closeButtonText,type:"close",theme:p},on:{press:this.onPress}})])}},render:function(){var e=arguments[0];return e("transition",{attrs:{name:this.transition?"van-slide-up":""}},[e("div",{directives:[{name:"show",value:this.show}],style:{zIndex:this.zIndex},class:h([this.theme,{"safe-area-inset-bottom":this.safeAreaInsetBottom}]),on:{touchstart:n["d"],animationend:this.onAnimationEnd,webkitAnimationEnd:this.onAnimationEnd}},[this.genTitle(),e("div",{class:h("body")},[this.genKeys(),this.genSidebar()])])])}})},"81a6":function(e,t,a){"use strict";a("3cd0"),a("f6a1")},"96b0":function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"a",function(){return o});var i=a("90c6");function n(e,t){var a=-1,i=Array(e);while(++a<e)i[a]=t(a);return i}function r(e){if(!e)return 0;while(Object(i["a"])(parseInt(e,10))){if(!(e.length>1))return 0;e=e.slice(1)}return parseInt(e,10)}function o(e,t){return 32-new Date(e,t-1,32).getDate()}},a035:function(e,t,a){"use strict";a("3cd0"),a("1a44"),a("acc2"),a("ff04")},a156:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ckeditor",e._b({attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}},"ckeditor",e.$attrs,!1))},n=[],r={name:"OmspEditor",components:{},props:{value:{type:String,default:""}},data:function(){return{editor:this.$OmspClassicEditor,editorData:"",editorConfig:{placeholder:"请输入······",toolbar:[]}}},watch:{value:function(e){this.editorData=e},editorData:function(e){this.$emit("input",e)}},mounted:function(){this.editorData=this.value}},o=r,c=a("2877"),s=Object(c["a"])(o,i,n,!1,null,"83061b96",null);t["a"]=s.exports},bad1:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var i=a("90c6");function n(e){return"[object Date]"===Object.prototype.toString.call(e)&&!Object(i["a"])(e.getTime())}},ee83:function(e,t,a){"use strict";var i=a("c31d"),n=a("d282"),r=a("68ed"),o=a("482d"),c=a("96b0"),s=a("1b10"),u=a("f253"),l=Object(i["a"])({},s["a"],{value:null,filter:Function,showToolbar:{type:Boolean,default:!0},formatter:{type:Function,default:function(e,t){return t}}}),g={data:function(){return{innerValue:this.formatValue(this.value)}},computed:{originColumns:function(){var e=this;return this.ranges.map(function(t){var a=t.type,i=t.range,n=Object(c["c"])(i[1]-i[0]+1,function(e){var t=Object(r["b"])(i[0]+e);return t});return e.filter&&(n=e.filter(a,n)),{type:a,values:n}})},columns:function(){var e=this;return this.originColumns.map(function(t){return{values:t.values.map(function(a){return e.formatter(t.type,a)})}})}},watch:{columns:"updateColumnValue",innerValue:function(e){this.$emit("input",e)}},mounted:function(){var e=this;this.updateColumnValue(),this.$nextTick(function(){e.updateInnerValue()})},methods:{getPicker:function(){return this.$refs.picker},onConfirm:function(){this.$emit("confirm",this.innerValue)},onCancel:function(){this.$emit("cancel")}},render:function(){var e=this,t=arguments[0],a={};return Object.keys(s["a"]).forEach(function(t){a[t]=e[t]}),t(u["a"],{ref:"picker",attrs:{columns:this.columns},on:{change:this.onChange,confirm:this.onConfirm,cancel:this.onCancel},props:Object(i["a"])({},a)})}},d=Object(n["a"])("time-picker"),m=d[0],h=m({mixins:[g],props:Object(i["a"])({},l,{minHour:{type:[Number,String],default:0},maxHour:{type:[Number,String],default:23},minMinute:{type:[Number,String],default:0},maxMinute:{type:[Number,String],default:59}}),computed:{ranges:function(){return[{type:"hour",range:[+this.minHour,+this.maxHour]},{type:"minute",range:[+this.minMinute,+this.maxMinute]}]}},watch:{filter:"updateInnerValue",minHour:"updateInnerValue",maxHour:"updateInnerValue",minMinute:"updateInnerValue",maxMinute:"updateInnerValue",value:function(e){e=this.formatValue(e),e!==this.innerValue&&(this.innerValue=e,this.updateColumnValue(e))}},methods:{formatValue:function(e){e||(e=Object(r["b"])(this.minHour)+":"+Object(r["b"])(this.minMinute));var t=e.split(":"),a=t[0],i=t[1];return a=Object(r["b"])(Object(o["a"])(a,this.minHour,this.maxHour)),i=Object(r["b"])(Object(o["a"])(i,this.minMinute,this.maxMinute)),a+":"+i},updateInnerValue:function(){var e=this.getPicker().getIndexes(),t=e[0],a=e[1],i=this.originColumns,n=i[0],r=i[1],o=n.values[t]||n.values[0],c=r.values[a]||r.values[0];this.innerValue=this.formatValue(o+":"+c)},onChange:function(e){var t=this;this.updateInnerValue(),this.$nextTick(function(){t.$nextTick(function(){t.$emit("change",e)})})},updateColumnValue:function(){var e=this,t=this.formatter,a=this.innerValue.split(":"),i=[t("hour",a[0]),t("minute",a[1])];this.$nextTick(function(){e.getPicker().setValues(i)})}}}),f=a("bad1"),p=(new Date).getFullYear(),b=Object(n["a"])("date-picker"),y=b[0],v=y({mixins:[g],props:Object(i["a"])({},l,{type:{type:String,default:"datetime"},minDate:{type:Date,default:function(){return new Date(p-10,0,1)},validator:f["a"]},maxDate:{type:Date,default:function(){return new Date(p+10,11,31)},validator:f["a"]}}),watch:{filter:"updateInnerValue",minDate:"updateInnerValue",maxDate:"updateInnerValue",value:function(e){e=this.formatValue(e),e.valueOf()!==this.innerValue.valueOf()&&(this.innerValue=e)}},computed:{ranges:function(){var e=this.getBoundary("max",this.innerValue),t=e.maxYear,a=e.maxDate,i=e.maxMonth,n=e.maxHour,r=e.maxMinute,o=this.getBoundary("min",this.innerValue),c=o.minYear,s=o.minDate,u=o.minMonth,l=o.minHour,g=o.minMinute,d=[{type:"year",range:[c,t]},{type:"month",range:[u,i]},{type:"day",range:[s,a]},{type:"hour",range:[l,n]},{type:"minute",range:[g,r]}];return"date"===this.type&&d.splice(3,2),"year-month"===this.type&&d.splice(2,3),d}},methods:{formatValue:function(e){return Object(f["a"])(e)||(e=this.minDate),e=Math.max(e,this.minDate.getTime()),e=Math.min(e,this.maxDate.getTime()),new Date(e)},getBoundary:function(e,t){var a,i=this[e+"Date"],n=i.getFullYear(),r=1,o=1,s=0,u=0;return"max"===e&&(r=12,o=Object(c["a"])(t.getFullYear(),t.getMonth()+1),s=23,u=59),t.getFullYear()===n&&(r=i.getMonth()+1,t.getMonth()+1===r&&(o=i.getDate(),t.getDate()===o&&(s=i.getHours(),t.getHours()===s&&(u=i.getMinutes())))),a={},a[e+"Year"]=n,a[e+"Month"]=r,a[e+"Date"]=o,a[e+"Hour"]=s,a[e+"Minute"]=u,a},updateInnerValue:function(){var e,t=this,a=this.getPicker().getIndexes(),i=function(e){var i=t.originColumns[e].values;return Object(c["b"])(i[a[e]])},n=i(0),r=i(1),o=Object(c["a"])(n,r);e="year-month"===this.type?1:i(2),e=e>o?o:e;var s=0,u=0;"datetime"===this.type&&(s=i(3),u=i(4));var l=new Date(n,r-1,e,s,u);this.innerValue=this.formatValue(l)},onChange:function(e){var t=this;this.updateInnerValue(),this.$nextTick(function(){t.$nextTick(function(){t.$emit("change",e)})})},updateColumnValue:function(){var e=this,t=this.innerValue,a=this.formatter,i=[a("year",""+t.getFullYear()),a("month",Object(r["b"])(t.getMonth()+1)),a("day",Object(r["b"])(t.getDate()))];"datetime"===this.type&&i.push(a("hour",Object(r["b"])(t.getHours())),a("minute",Object(r["b"])(t.getMinutes()))),"year-month"===this.type&&(i=i.slice(0,2)),this.$nextTick(function(){e.getPicker().setValues(i)})}}}),S=Object(n["a"])("datetime-picker"),O=S[0],k=S[1];t["a"]=O({props:Object(i["a"])({},h.props,{},v.props),render:function(){var e=arguments[0],t="time"===this.type?h:v;return e(t,{class:k(),props:Object(i["a"])({},this.$props),on:Object(i["a"])({},this.$listeners)})}})},f6a1:function(e,t,a){},ff04:function(e,t,a){}}]);