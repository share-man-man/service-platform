(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3697fb5d"],{"0390":function(t,e,a){"use strict";var n=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},"214f":function(t,e,a){"use strict";a("b0c5");var n=a("2aba"),i=a("32e9"),r=a("79e5"),o=a("be13"),s=a("2b4c"),c=a("520a"),u=s("species"),f=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,e,a){var l=s(t),p=!r((function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})),h=p?!r((function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},"split"===t&&(a.constructor={},a.constructor[u]=function(){return a}),a[l](""),!e})):void 0;if(!p||!h||"replace"===t&&!f||"split"===t&&!d){var v=/./[l],m=a(o,l,""[t],(function(t,e,a,n,i){return e.exec===c?p&&!i?{done:!0,value:v.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}})),g=m[0],b=m[1];n(String.prototype,t,g),i(RegExp.prototype,l,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"28a5":function(t,e,a){"use strict";var n=a("aae3"),i=a("cb7c"),r=a("ebd6"),o=a("0390"),s=a("9def"),c=a("5f1b"),u=a("520a"),f=a("79e5"),d=Math.min,l=[].push,p="split",h="length",v="lastIndex",m=4294967295,g=!f((function(){RegExp(m,"y")}));a("214f")("split",2,(function(t,e,a,f){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!n(t))return a.call(i,t,e);var r,o,s,c=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?m:e>>>0,g=new RegExp(t.source,f+"g");while(r=u.call(g,i)){if(o=g[v],o>d&&(c.push(i.slice(d,r.index)),r[h]>1&&r.index<i[h]&&l.apply(c,r.slice(1)),s=r[0][h],d=o,c[h]>=p))break;g[v]===r.index&&g[v]++}return d===i[h]?!s&&g.test("")||c.push(""):c.push(i.slice(d)),c[h]>p?c.slice(0,p):c}:"0"[p](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,n){var i=t(this),r=void 0==a?void 0:a[e];return void 0!==r?r.call(a,i,n):b.call(String(i),a,n)},function(t,e){var n=f(b,t,this,e,b!==a);if(n.done)return n.value;var u=i(t),l=String(this),p=r(u,RegExp),h=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),k=new p(g?u:"^(?:"+u.source+")",v),_=void 0===e?m:e>>>0;if(0===_)return[];if(0===l.length)return null===c(k,l)?[l]:[];var x=0,y=0,D=[];while(y<l.length){k.lastIndex=g?y:0;var S,O=c(k,g?l:l.slice(y));if(null===O||(S=d(s(k.lastIndex+(g?0:y)),l.length))===x)y=o(l,y,h);else{if(D.push(l.slice(x,y)),D.length===_)return D;for(var w=1;w<=O.length-1;w++)if(D.push(O[w]),D.length===_)return D;y=x=S}}return D.push(l.slice(x)),D}]}))},3463:function(t,e,a){},"520a":function(t,e,a){"use strict";var n=a("0bfb"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,s="lastIndex",c=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[s]||0!==e[s]}(),u=void 0!==/()??/.exec("")[1],f=c||u;f&&(o=function(t){var e,a,o,f,d=this;return u&&(a=new RegExp("^"+d.source+"$(?!\\s)",n.call(d))),c&&(e=d[s]),o=i.call(d,t),c&&o&&(d[s]=d.global?o.index+o[0].length:e),u&&o&&o.length>1&&r.call(o[0],a,(function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(o[f]=void 0)})),o}),t.exports=o},"5f1b":function(t,e,a){"use strict";var n=a("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var r=a.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},aae3:function(t,e,a){var n=a("d3f4"),i=a("2d95"),r=a("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},b0c5:function(t,e,a){"use strict";var n=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},b39a:function(t,e,a){var n=a("d3f4");t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},c26b:function(t,e,a){"use strict";var n=a("86cc").f,i=a("2aeb"),r=a("dcbc"),o=a("9b43"),s=a("f605"),c=a("4a59"),u=a("01f9"),f=a("d53b"),d=a("7a56"),l=a("9e1e"),p=a("67ab").fastKey,h=a("b39a"),v=l?"_s":"size",m=function(t,e){var a,n=p(e);if("F"!==n)return t._i[n];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,u){var f=t((function(t,n){s(t,f,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=n&&c(n,a,t[u],t)}));return r(f.prototype,{clear:function(){for(var t=h(this,e),a=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete a[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var a=h(this,e),n=m(a,t);if(n){var i=n.n,r=n.p;delete a._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),a._f==n&&(a._f=i),a._l==n&&(a._l=r),a[v]--}return!!n},forEach:function(t){h(this,e);var a,n=o(t,arguments.length>1?arguments[1]:void 0,3);while(a=a?a.n:this._f){n(a.v,a.k,this);while(a&&a.r)a=a.p}},has:function(t){return!!m(h(this,e),t)}}),l&&n(f.prototype,"size",{get:function(){return h(this,e)[v]}}),f},def:function(t,e,a){var n,i,r=m(t,e);return r?r.v=a:(t._l=r={i:i=p(e,!0),k:e,v:a,p:n=t._l,n:void 0,r:!1},t._f||(t._f=r),n&&(n.n=r),t[v]++,"F"!==i&&(t._i[i]=r)),t},getEntry:m,setStrong:function(t,e,a){u(t,e,(function(t,a){this._t=h(t,e),this._k=a,this._l=void 0}),(function(){var t=this,e=t._k,a=t._l;while(a&&a.r)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?f(0,"keys"==e?a.k:"values"==e?a.v:[a.k,a.v]):(t._t=void 0,f(1))}),a?"entries":"values",!a,!0),d(e)}}},c622:function(t,e,a){"use strict";var n=a("3463"),i=a.n(n);i.a},e0b8:function(t,e,a){"use strict";var n=a("7726"),i=a("5ca1"),r=a("2aba"),o=a("dcbc"),s=a("67ab"),c=a("4a59"),u=a("f605"),f=a("d3f4"),d=a("79e5"),l=a("5cc5"),p=a("7f20"),h=a("5dbc");t.exports=function(t,e,a,v,m,g){var b=n[t],k=b,_=m?"set":"add",x=k&&k.prototype,y={},D=function(t){var e=x[t];r(x,t,"delete"==t||"has"==t?function(t){return!(g&&!f(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,a){return e.call(this,0===t?0:t,a),this})};if("function"==typeof k&&(g||x.forEach&&!d((function(){(new k).entries().next()})))){var S=new k,O=S[_](g?{}:-0,1)!=S,w=d((function(){S.has(1)})),I=l((function(t){new k(t)})),N=!g&&d((function(){var t=new k,e=5;while(e--)t[_](e,e);return!t.has(-0)}));I||(k=e((function(e,a){u(e,k,t);var n=h(new b,e,k);return void 0!=a&&c(a,m,n[_],n),n})),k.prototype=x,x.constructor=k),(w||N)&&(D("delete"),D("has"),m&&D("get")),(N||O)&&D(_),g&&x.clear&&delete x.clear}else k=v.getConstructor(e,t,m,_),o(k.prototype,a),s.NEED=!0;return p(k,t),y[t]=k,i(i.G+i.W+i.F*(k!=b),y),g||v.setStrong(k,t,m),k}},e18d:function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"omsp-body",attrs:{id:"omspHandingTask"}},[a("van-nav-bar",{staticClass:"omsp-nav-bar",attrs:{title:"审批","left-text":"返回","left-arrow":"",fixed:"","z-index":99},on:{"click-left":t.backToIndex}}),a("omsp-task-detail",{ref:"detail",attrs:{"form-data":t.formData,task:t.task,type:1},on:{commit:t.commitOpinions,changeNextNode:t.changeNextNode,derivativeProblem:t.derivativeProblem,derivativeChange:t.derivativeChange}})],1)])},r=[],o=(a("8e6e"),a("456d"),a("28a5"),a("433b"),a("d399")),s=(a("47e2"),a("2241")),c=(a("ac6a"),a("5df3"),a("f400"),a("bd86")),u=(a("da02"),a("6b41")),f=a("15ab"),d=a("03a2");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(c["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h={name:"HandingTask",components:(n={},Object(c["a"])(n,u["a"].name,u["a"]),Object(c["a"])(n,"omsp-task-detail",d["a"]),n),props:{task:Object},data:function(){return{axiosset:{timeout:5e3,headers:{token:""}},nodeNum:1,opinions:"",opinionsTextarea:{maxHeight:150,minHeight:50},formData:{bsid:"",description:"",occur_date:"",urgency:"",biz_code:"",taskName:"",approveOpinion:"",isPass:"1",stepList:[],nextNode:"",nextNodeList:[],nodeUserList:[],nodeUser:"",operation:"",target_sys:[],team_id:[],title:"",actionIdArray:[],delUser:"",delUserList:[],delUserListSelector:[],satisfaction:"",satisfactionList:[],satisfactionListSelector:[],derivativeProblem:!1,derivativeChange:!1},commitForm:new Map}},watch:{"formData.ISPASS":function(t,e){JSON.stringify(e),this.formData.showISPASS&&"1"===t?this.formData.showDelUser=!0:this.formData.showDelUser=!1}},mounted:function(){this.init()},methods:{backToIndex:function(){this.$router.slid="right",this.$router.back()},commitOpinions:function(t){var e=this;s["a"].confirm({message:"确认提交审批吗？"}).then((function(){o["a"].loading({mask:!0,forbidClick:!0,duration:0,message:"请稍后..."}),setTimeout((function(){var a=p({processInstanceId:e.task.processInstanceId,wiatmenuid:"",bsid:e.task.bsid,exids:"",biz_code:e.task.biz_code,taskname:e.task.taskName,isEdit_:"",cumulativetime:"",ISPASS:e.formData.ISPASS||"1",taskId:e.task.taskId,node_id:e.task.flowNodeId},t);e.$OmspRequest.sendRequest({url:"/appTaskRestService/dealTask",data:a}).then((function(t){o["a"].clear();var a=JSON.parse(t.data.resultMessage);a.flag?(o["a"].success("提交成功"),e.$store.commit("page/removeCachePageName","OmspIndex"),setTimeout((function(){e.$router.push({path:"index"})}))):Object(s["a"])({message:"提交失败"})})).catch((function(t){JSON.stringify(t),console.log(t),o["a"].fail("办理失败")})).finally((function(){}))}),0)})).catch((function(){}))},receiveTask:function(){var t=this;o["a"].loading({mask:!0,forbidClick:!0,duration:0,message:"领取任务"});var e={nodestate:this.task.nodestate,creater:this.task.creater,bsid:this.task.bsid,biz_code:this.task.biz_code,nodeid:this.task.flowNodeId,proc_inst_id_:this.task.processInstanceId,nodename:this.task.taskName,taskid:this.task.taskId};setTimeout((function(){t.$OmspRequest.sendRequest({url:"/appTaskRestService/receiveTask",data:e}).then((function(){o["a"].success("领取成功"),t.$store.commit("page/removeCachePageName","OmspIndex"),t.getBaseData()})).catch((function(t){JSON.stringify(t),o["a"].fail("领取任务失败，请重新登录")})).finally((function(){}))}),0)},getBaseData:function(){var t=this;o["a"].loading({mask:!0,forbidClick:!0,duration:0,message:"加载中..."}),setTimeout((function(){t.$OmspRequest.sendRequest({url:"/appTaskRestService/toDeal",data:t.task}).then((function(e){var a=e.data.formData;t.formData.bsid=t.task.bsid,t.formData.biz_code=t.task.biz_code,t.formData.taskName=t.task.taskName,t.formData.title=t.task.title,t.formData.description="BG"===t.formData.biz_code?a.change_desc:"SJ"===t.formData.biz_code?a.ck_description:a.description,a.occur_date&&(t.formData.occur_date=a.occur_date),a.create_date&&(t.formData.occur_date=a.create_date),t.formData.urgency=a.urgency,t.formData.target_sys=a.target_sys,t.formData.team_id=a.team_id,t.formData.nextNodeList=e.data.nextNode,t.formData.nextNode="",t.formData.delUserList=JSON.parse(e.data.delUserList),t.formData.delUserList&&(t.formData.delUserListSelector=t.formData.delUserList.map((function(t){return t.name}))),t.formData.showDelUser="任务分配"===t.formData.taskName,t.formData.satisfactionList=e.data.satisfactionType,t.formData.satisfactionList&&(t.formData.satisfactionListSelector=t.formData.satisfactionList.map((function(t){return t.name})));var n=JSON.parse(e.data.checkAction);t.formData.actionIdArray=n.actionids.split(","),-1===n.actionids.indexOf("ISPASS")&&-1===n.actionids.indexOf("ISRELEASE")&&2===e.data.nextNode.length&&t.formData.actionIdArray.push("ISPASS"),o["a"].success("加载成功")})).catch((function(t){JSON.stringify(t),console.log(t),o["a"].fail("加载基础数据失败")})).finally((function(){}))}),0)},changeNextNode:function(t){var e=this,a=this.formData.nextNodeList[t].id;this.$OmspRequest.sendRequest({url:"/appTaskRestService/getNodeUser",data:{nodeid:a,processInstanceId:this.task.processInstanceId,bsid:this.task.bsid,biz_code:this.formData.biz_code}}).then((function(t){t.data.nodeUserList?e.formData.nodeUserList=t.data.nodeUserList:(e.formData.nodeUserList=[],e.formData.nodeUser="")})).catch((function(t){console.log(t),JSON.stringify(t)})).finally((function(){}))},derivativeProblem:function(){},derivativeChange:function(){},init:function(){this.axiosset.headers.token=f["a"].get_omsp_app_token(),"0"===this.task.nodestate?this.receiveTask():this.getBaseData()}}},v=h,m=(a("c622"),a("2877")),g=Object(m["a"])(v,i,r,!1,null,null,null);e["default"]=g.exports},f400:function(t,e,a){"use strict";var n=a("c26b"),i=a("b39a"),r="Map";t.exports=a("e0b8")(r,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(i(this,r),t);return e&&e.v},set:function(t,e){return n.def(i(this,r),0===t?0:t,e)}},n,!0)}}]);